<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Moose2Model</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">


    <style>
        canvas {
            border: 1px solid black;
        }

        #canvas,
        #contextMenu,
        #onClickInfo {
            position: absolute;
        }

        #contextMenu {
            border: 1px solid green;
            background: white;
            list-style: none;
            padding: 3px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 15px;
        }

        #onClickInfo {
            border: 1px solid green;
            background: white;
            list-style: none;
            padding: 3px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 15px;
        }
    </style>
</head>

<body onload="draw();" onresize="draw();">
    <script src="jquery-3.6.0.js"></script>

    <form>
        <input type="button" value="Load model">
    </form>
    <br>
    <!-- <p></p>
    <p></p> -->
    <div id=canvasContainer></div>
    <canvas id="pane" width="800" height="800"></canvas>
    <ul id=contextMenu>
        <li>Will be renamed</li>
    </ul>
    <ul id=onClickInfo>
        <li>Will be renamed</li>
    </ul>
    </div>

    <script src="Global.js"></script>
    <script src="AnalyzeMseFile.js"></script>
    <script src="PositionElements.js"></script>
    <script src="Drawing.js"></script>
    <script src="ContextMenu.js"></script>
    <script src="MouseClick.js"></script>

    <script>
        'use strict';


        const button = document.querySelector('input');
        // const paragraph = document.querySelector('p');

        button.addEventListener('click', LoadModel);

        if (window.isSecureContext) {
            // window.alert('The browser context is secure. This application will work');
        }
        else {
            window.alert('The browser context is not secure. This application will not work');
        }

        async function LoadModel() {
            'use strict';
            // open file picker
            [fileHandle] = await window.showOpenFilePicker();

            if (fileHandle.kind === 'file') {
                // run file code
                // get file contents
                const fileData = await fileHandle.getFile();
                const contents = await fileData.text();
                analyzeMseFile(contents);
                positionCircle(g_width, g_height);
                mouseover = true;
                draw();

            } else if (fileHandle.kind === 'directory') {
                // run directory code
            }

        }

    </script>


</body>

</html>